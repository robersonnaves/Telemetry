global:
  scrape_interval: 15s
  evaluation_interval: 15s

remote_write:
  - url: "http://telegraf:9201/api/v1/write"
    queue_config:
      capacity: 30000
      max_shards: 10
      min_shards: 1
      max_samples_per_send: 8000
      batch_send_deadline: 5s
      min_backoff: 30ms
      max_backoff: 5s

rule_files:
  # - "first_rules.yml"
  # - "second_rules.yml"

scrape_configs:
  # OpenTelemetry Collector metrics
  - job_name: 'otel-collector'
    static_configs:
      - targets: ['otel-collector:8889']
    scrape_interval: 15s
    metrics_path: /metrics

  # Prometheus self-monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
    scrape_interval: 15s
  
  # Mock Telemetry Generator - exposed on host port 6666
  - job_name: 'mock-telemetry-generator'
    static_configs:
      - targets: ['192.168.200.251:6666']
    scrape_interval: 15s
    metrics_path: /metrics
  
  # cAdvisor - métricas de containers
  - job_name: 'cadvisor'
    static_configs:
      - targets: ['192.168.200.210:8080']
    scrape_interval: 15s
    metrics_path: /metrics

  # Node Exporter - métricas do host
  - job_name: 'node-exporter'
    static_configs:
      - targets: ['192.168.200.210:9100']
    scrape_interval: 15s
    metrics_path: /metrics

  # QuestDB - métricas do próprio QuestDB
  - job_name: 'questdb'
    static_configs:
      - targets: ['questdb:9003']
    scrape_interval: 15s
    metrics_path: /metrics

  # - job_name: 'rcheck-api'  
  #   static_configs:
  #     - targets: ['rcheck-api:5001']
  #   scrape_interval: 15s
  #   metrics_path: /api/debug/metrics
